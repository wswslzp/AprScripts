source ./mf_blk.tcl
# set the metal filler option

setMetalFill -layer M1 -minWidth 2.0 -opcActiveSpacing 0.090 -decrement 0 -maxLength 2.0 -minLength 2.0 -iterationName MF2x2
setMetalFill -layer M2 -minLength 2.0 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -iterationName MF2x2
setMetalFill -layer M3 -minLength 2.0 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -iterationName MF2x2
setMetalFill -layer M4 -minLength 2.0 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -iterationName MF2x2
setMetalFill -layer M5 -minLength 2.0 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -iterationName MF2x2
setMetalFill -layer T4M2 -minLength 2 -minWidth 2 -opcActiveSpacing 0.400 -decrement 0 -maxLength 2.0 -iterationName MF2x2
setMetalFill -layer RDL -minLength 2 -minWidth 2 -opcActiveSpacing 2.000 -decrement 0 -maxLength 2 -iterationName MF2x2
setMetalFill -layer M1 -gapSpacing 0.8 -borderSpacing 2.8 -minWidth 2.0 -opcActiveSpacing 0.090 -decrement 0 -maxLength 2.0 -activeSpacing 10 -minLength 2.0 -iterationName MF2x2
setMetalFill -layer M2 -minLength 2.0 -gapSpacing 0.8 -borderSpacing 2.8 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -activeSpacing 10 -iterationName MF2x2
setMetalFill -layer M3 -minLength 2.0 -gapSpacing 0.8 -borderSpacing 2.8 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -activeSpacing 10 -iterationName MF2x2
setMetalFill -layer M4 -minLength 2.0 -gapSpacing 0.8 -borderSpacing 2.8 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -activeSpacing 10 -iterationName MF2x2
setMetalFill -layer M5 -minLength 2.0 -gapSpacing 0.8 -borderSpacing 2.8 -minWidth 2.0 -opcActiveSpacing 0.100 -decrement 0 -maxLength 2.0 -activeSpacing 10 -iterationName MF2x2
setMetalFill -layer T4M2 -minLength 2 -borderSpacing 2.8 -minWidth 2 -opcActiveSpacing 0.400 -decrement 0 -maxLength 2.0 -activeSpacing 10 -iterationName MF2x2
setMetalFill -layer RDL -activeSpacing 2.8 -minLength 2.8 -gapSpacing 2.8 -maxWidth 2.8 -borderSpacing 2.8 -minWidth 2.8 -opcActiveSpacing 2.000 -decrement 0 -maxLength 2.8 -iterationName MF2x2
setMetalFill -layer M1 -gapSpacing 0.8 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.090 -decrement 0 -maxLength 1 -activeSpacing 10 -iterationName MF1x1
setMetalFill -layer M2 -gapSpacing 0.8 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 10 -iterationName MF1x1
setMetalFill -layer M3 -gapSpacing 0.8 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 10 -iterationName MF1x1
setMetalFill -layer M4 -gapSpacing 0.8 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 10 -iterationName MF1x1
setMetalFill -layer M5 -gapSpacing 0.8 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 10 -iterationName MF1x1
setMetalFill -layer T4M2 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.400 -decrement 0 -maxLength 1 -activeSpacing 10 -iterationName MF1x1
setMetalFill -layer RDL -activeSpacing 2.8 -minLength 0 -gapSpacing 2.8 -maxWidth 0 -borderSpacing 2.8 -minWidth 0 -opcActiveSpacing 2.000 -decrement 0 -maxLength 0 -iterationName MF1x1
setMetalFill -layer M1 -gapSpacing 0.3 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.090 -decrement 0 -maxLength 1 -activeSpacing 3 -iterationName MF1x1
setMetalFill -layer M2 -gapSpacing 0.3 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 3 -iterationName MF1x1
setMetalFill -layer M3 -gapSpacing 0.3 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 3 -iterationName MF1x1
setMetalFill -layer M4 -gapSpacing 0.3 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 3 -iterationName MF1x1
setMetalFill -layer M5 -gapSpacing 0.3 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.100 -decrement 0 -maxLength 1 -activeSpacing 3 -iterationName MF1x1
setMetalFill -layer T4M2 -gapSpacing 0.4 -maxWidth 1 -borderSpacing 2.8 -minWidth 1 -opcActiveSpacing 0.400 -decrement 0 -maxLength 1 -activeSpacing 0.6 -iterationName MF1x1
setMetalFill -layer RDL -activeSpacing 2.8 -minLength 0 -gapSpacing 2.8 -maxWidth 0 -borderSpacing 2.8 -minWidth 0 -opcActiveSpacing 2.000 -decrement 0 -maxLength 0 -iterationName MF1x1
setMetalFill -layer M1 -gapSpacing 0.25 -maxWidth 0.42 -borderSpacing 2.8 -minWidth 0.42 -opcActiveSpacing 0.090 -decrement 0 -maxLength 0.42 -activeSpacing 0.3 -minLength 0.42 -iterationName MF0x0
setMetalFill -layer M2 -minLength 0.42 -gapSpacing 0.25 -maxWidth 0.42 -borderSpacing 2.8 -minWidth 0.42 -opcActiveSpacing 0.100 -decrement 0 -maxLength 0.42 -activeSpacing 0.3 -iterationName MF0x0
setMetalFill -layer M3 -minLength 0.42 -gapSpacing 0.25 -maxWidth 0.42 -borderSpacing 2.8 -minWidth 0.42 -opcActiveSpacing 0.100 -decrement 0 -maxLength 0.42 -activeSpacing 0.3 -iterationName MF0x0
setMetalFill -layer M4 -minLength 0.42 -gapSpacing 0.25 -maxWidth 0.42 -borderSpacing 2.8 -minWidth 0.42 -opcActiveSpacing 0.100 -decrement 0 -maxLength 0.42 -activeSpacing 0.3 -iterationName MF0x0
setMetalFill -layer M5 -minLength 0.42 -gapSpacing 0.25 -maxWidth 0.42 -borderSpacing 2.8 -minWidth 0.42 -opcActiveSpacing 0.100 -decrement 0 -maxLength 0.42 -activeSpacing 0.3 -iterationName MF0x0
setMetalFill -layer T4M2 -minLength 1.2 -gapSpacing 0.4 -maxWidth 0.6 -borderSpacing 2.8 -minWidth 0.6 -opcActiveSpacing 0.400 -decrement 0 -maxLength 1.2 -activeSpacing 0.6 -iterationName MF0x0
setMetalFill -layer RDL -activeSpacing 2.8 -minLength 0 -gapSpacing 2.8 -maxWidth 0 -borderSpacing 2.8 -minWidth 0 -opcActiveSpacing 2.000 -decrement 0 -maxLength 0 -iterationName MF0x0


#setMetalFill -layer M1 -opcActiveSpacing 0.090
#setMetalFill -layer M2 -opcActiveSpacing 0.100
#setMetalFill -layer M3 -opcActiveSpacing 0.100
#setMetalFill -layer M4 -opcActiveSpacing 0.100
#setMetalFill -layer M5 -opcActiveSpacing 0.100
#setMetalFill -layer T4M2 -opcActiveSpacing 0.400
#setMetalFill -layer RDL -opcActiveSpacing 2.000
#setMultiCpuUsage -localCpu 8 -cpuPerRemoteHost 1 -remoteHost 0 -keepLicense true
#setDistributeHost -local
addViaFill -layer { V1 V2 V3 V4 T4V2 RV } -mode { floating connectToPG }
addMetalFill -layer { M1 M2 M3 M4 M5 T4M2 RDL } -nets { IO_GNDK CORE_GNDK IO_VCCK CORE_VCCK }  -iterationNameList { MF2x2 }
addMetalFill -layer { M1 M2 M3 M4 M5 T4M2 RDL } -nets { IO_GNDK CORE_GNDK IO_VCCK CORE_VCCK }  -iterationNameList { MF1x1 }
addMetalFill -layer { M1 M2 M3 M4 M5 T4M2 RDL } -nets { IO_GNDK CORE_GNDK IO_VCCK CORE_VCCK }  -iterationNameList { MF0x0 }

verifyMetalDensity -report Top_Remcm_mini_sram_withio.density.rpt

saveDesign ./DBS/signoff_after_metalfill.enc -compress
saveNetlist ./DBS/LEC/signoff_after_metalfill.v.gz

source write.tcl
